---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import { buildSeo } from '../lib/seo';

const siteUrl = import.meta.env.PUBLIC_SITE_URL || 'https://gamelayer.io';
const seo = buildSeo({
	title: "GameLayer API Documentation - Complete Gamification API Reference",
	description: "Complete API documentation for GameLayer's Gamification API platform. Learn how to integrate gamification mechanics, user engagement features, and customer loyalty systems with our comprehensive API.",
	pathname: '/api-docs'
});

const schemas = [
	{
		"@context": "https://schema.org",
		"@type": "WebPage",
		"@id": `${siteUrl}/api-docs/#webpage`,
		"url": `${siteUrl}/api-docs`,
		"name": seo.title,
		"description": seo.description,
		"isPartOf": {
			"@type": "WebSite",
			"name": "GameLayer",
			"url": siteUrl
		}
	},
	{
		"@context": "https://schema.org",
		"@type": "BreadcrumbList",
		"itemListElement": [
			{
				"@type": "ListItem",
				"position": 1,
				"name": "Home",
				"item": siteUrl
			},
			{
				"@type": "ListItem",
				"position": 2,
				"name": "API Docs",
				"item": `${siteUrl}/api-docs`
			}
		]
	}
];
---

<Layout 
	title={seo.title}
	description={seo.description}
	keywords="gamification API documentation, API reference, gamification integration, user engagement API, customer loyalty API, gamification mechanics API"
	canonical={seo.canonical}
	schema={schemas}
>
	<main id="main-content">
		<Header />
		
		<!-- Load RapiDoc from the CDN -->
		<script type="module" src="https://cdn.jsdelivr.net/npm/rapidoc@9.3.8/dist/rapidoc-min.js" is:inline></script>

		<!-- RapiDoc component with extensive configuration options -->
		<rapi-doc
			spec-url="https://glapidocs.blob.core.windows.net/apidocs/gamelayer.yaml"
			theme="light"
			render-style="read"  
			show-header="false" 
			show-info="true"    
			show-components="true" 
			show-authentication="true" 
			allow-spec-file-download="true" 
			allow-server-selection="true" 
			schema-style="table"
			schema-expand-level="3" 
			default-schema-tab="example"      
			default-api-server="production" 
			use-path-in-nav-bar="true"        
			show-method-in-nav-bar="as-colored-block" 
			update-route="true"    
			layout="column"   
			regular-font="montserrat"
			nav-item-spacing="relaxed"
			nav-bg-color="#f5f5f5" 
			primary-color="#4A90E2"           
		></rapi-doc>
	</main>
</Layout>

<style>
	main {
		background-color: #fff;
		min-height: 100vh;
	}
	
	rapi-doc {
		width: 100%;
		height: 100vh;
	}
</style>
