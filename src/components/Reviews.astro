---
import utils from '../utils'

const reviews = utils.reviews

---

<section class="reviews-section" aria-label="Customer trust and platform scale">
    <div class="container">
        <div class="reviews-surface">
            <!-- Header -->
            <div class="reviews-header">
                <h2 class="reviews-title">Why companies ❤ GameLayer</h2>
                <p class="reviews-framing-text">GameLayer powers engagement mechanics for products used by millions of users. These figures reflect aggregated usage across customer programmes and live environments.</p>
            </div>

            <!-- 4-Panel Narrative Section (Step-Up style) -->
            <div class="reviews-panels" aria-label="Why companies love GameLayer">
                <div class="reviews-panel reviews-panel--1">
                    <div class="reviews-panel__num">1</div>
                    <div class="reviews-panel__title">Sustainable engagement</div>
                    <div class="reviews-panel__text">
                        Design for repeat participation, not one-off campaigns. Use missions, streaks, and rewards to keep users coming back over time — without relying on constant promotions.
                    </div>
                </div>

                <div class="reviews-panel reviews-panel--2">
                    <div class="reviews-panel__num">2</div>
                    <div class="reviews-panel__title">Progress users can feel</div>
                    <div class="reviews-panel__text">
                        Make improvement visible through XP, levels, and achievements. Give users clear goals, momentum, and a sense of advancement that builds motivation naturally.
                    </div>
                </div>

                <div class="reviews-panel reviews-panel--3">
                    <div class="reviews-panel__num">3</div>
                    <div class="reviews-panel__title">Social motivation</div>
                    <div class="reviews-panel__text">
                        Encourage friendly competition and collaboration with teams and leaderboards. Turn individual actions into shared experiences - at scale - that users want to participate in together.
                    </div>
                </div>

                <div class="reviews-panel reviews-panel--4">
                    <div class="reviews-panel__num">4</div>
                    <div class="reviews-panel__title">Built for real programmes</div>
                    <div class="reviews-panel__text">
                        Run production-ready engagement with rules, eligibility, budgets, and rewards. Control how mechanics behave and scale programmes with confidence.
                    </div>
                </div>
            </div>

            <!-- PART 2: Metrics Strip (existing, unchanged) -->
            <div class="reviews-metrics">
                {reviews.map((item) => {
                    // Pre-compute percentage and description for better performance
                    const statsMap = {
                        '75% of users engaged weekly': { percentage: '75%', description: 'of users engaged weekly' },
                        '60% boost in brand sentiment': { percentage: '60%', description: 'boost in brand sentiment' },
                        '25% increase in session time': { percentage: '25%', description: 'increase in session time' },
                        '200% increase in task completion': { percentage: '200%', description: 'increase in task completion' },
                        '50% boost in product awareness': { percentage: '50%', description: 'boost in product awareness' },
                        '40% increase in no. of sessions': { percentage: '40%', description: 'increase in no. of sessions' }
                    };
                    
                    const stats = statsMap[item.comment as keyof typeof statsMap] || { percentage: item.comment, description: '' };
                    
                    return (
                        <div class="metric-item">
                            <div class="metric-percentage">{stats.percentage}</div>
                            <div class="metric-label">{stats.description}</div>
                        </div>
                    );
                })}
            </div>

            <!-- Footnote -->
            <p class="metrics-footnote">Metrics are indicative and vary by implementation and use case</p>
        </div>
    </div>
</section>

<style lang="scss">
.reviews-section {
    width: 100%;
    padding: clamp(56px, 6vw, 96px) 0;
}

.reviews-surface {
    background: var(--surface);
    border: 1px solid rgba(0,0,0,0.08);
    border-radius: 24px;
    padding: clamp(36px, 4vw, 64px);
}

/* Header */
.reviews-header {
    text-align: center;
    margin-bottom: clamp(40px, 5vw, 64px);
}

.reviews-title {
    margin: 0 0 20px 0;
    font-size: clamp(36px, 4vw, 56px);
    letter-spacing: -0.02em;
    color: var(--as-black);
    font-weight: 600;
    line-height: 1.2;
}

.reviews-framing-text {
    font-size: 18px;
    line-height: 1.7;
    color: var(--as-black);
    margin: 0 auto;
    max-width: 80ch;
}

/* 4-Panel Colored Box Design (Step-Up style) */
.reviews-panels {
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 0;
    border-radius: 28px;
    overflow: hidden;
    margin: 40px auto 56px;
    width: 100%;
    max-width: 100%;
}

.reviews-panel {
    padding: 28px;
}

.reviews-panel__num {
    font-size: 40px;
    font-weight: 800;
    line-height: 1;
    margin-bottom: 14px;
}

.reviews-panel__title {
    font-size: 18px;
    font-weight: 800;
    margin-bottom: 10px;
}

.reviews-panel__text {
    font-size: 16px;
    line-height: 1.6;
    opacity: 0.85;
}

.reviews-panel--1 { background: #EAF4FF; }
.reviews-panel--2 { background: #ECF8F1; }
.reviews-panel--3 { background: #FFF8D6; }
.reviews-panel--4 { background: #FCEEF4; }

@media (max-width: 1024px) {
    .reviews-panels {
        grid-template-columns: repeat(2, minmax(0, 1fr));
        border-radius: 28px;
    }
}

@media (max-width: 640px) {
    .reviews-panels {
        grid-template-columns: 1fr;
        border-radius: 28px;
    }
}

/* PART 2: Metrics Strip (existing, unchanged) */
.reviews-metrics {
    display: grid;
    grid-template-columns: repeat(6, minmax(0, 1fr));
    gap: 24px;
    align-items: end;
    margin-top: 40px;
}

.metric-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    width: 100%;
    
    .metric-percentage {
        font-size: clamp(40px, 3.4vw, 56px);
        font-weight: 600;
        color: var(--as-black);
        line-height: 1;
        margin-bottom: 8px;
    }
    
    .metric-label {
        font-size: 14px;
        font-weight: 500;
        color: rgba(0,0,0,0.65);
        line-height: 1.25;
        max-width: 140px;
        text-align: center;
    }
}

.metrics-footnote {
    font-size: 15px;
    line-height: 1.5;
    text-align: center;
    color: rgba(0,0,0,0.6);
    margin: 0;
    opacity: 0.85;
}

/* Responsive */
@media (max-width: 1024px) {
    .reviews-metrics {
        grid-template-columns: repeat(3, minmax(0, 1fr));
    }
}

@media (max-width: 640px) {
    .reviews-metrics {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    
    .metric-item {
        .metric-percentage {
            font-size: clamp(32px, 4vw, 40px);
        }
        
        .metric-label {
            font-size: 13px;
        }
    }
}

</style>