---
import baazLogo from '../images/brands/baaz_logo.png'
import dubbzLogo from '../images/brands/dubbz_logo.png'
import finnairLogo from '../images/brands/finnair_logo.png'
import keskoLogo from '../images/brands/kesko_logo.png'
import lahtiLogo from '../images/brands/lahti_logo.png'
import reimaLogo from '../images/brands/reima_logo.png'
import samsungLogo from '../images/brands/samsung_logo.png'
import sdpLogo from '../images/brands/sdp_logo.png'
import symbalooLogo from '../images/brands/symbaloo_logo.png'
import veikkausLogo from '../images/brands/veikkaus_logo.png'

import finnairRef from '../../references_images/finnair_reference.png'
import veikkausRef from '../../references_images/veikkaus_reference.png'
import reimaRef from '../../references_images/reima_reference.png'
import stepUpRef from '../../references_images/step-up_reference.png'

// Reference tiles with screenshots
const referenceTiles = [
    {
        screenshot: finnairRef.src,
        name: "Finnair",
        category: "Airline",
        description: "Driving repeat engagement beyond transactions. GameLayer powers missions, rewards and progression mechanics that encourage return visits, deeper product use and long-term customer relationships."
    },
    {
        screenshot: reimaRef.src,
        name: "Reima",
        category: "Retail",
        description: "Turning physical activity and learning into digital engagement. GameLayer powers seasonal challenges, daily streaks and achievements that connect real-world behaviour to brand interaction."
    },
    {
        screenshot: veikkausRef.src,
        name: "Veikkaus Points",
        category: "National Lottery",
        description: "Adding progression and rewards on top of regulated gaming experiences. GameLayer enables missions, tiers, and campaigns that increase participation while respecting platform rules and constraints."
    },
    {
        screenshot: stepUpRef.src,
        name: "Step-Up",
        category: "Wellbeing",
        description: "Encouraging healthy behaviour through structured engagement loops. GameLayer powers challenges, progression systems and team-based mechanics that motivate ongoing participation.",
        learnMoreUrl: "https://stepup.gamelayer.io/"
    }
]

// Logo wall - all 10 logos in 2x5 grid
const logoWallLogos = [
    { src: finnairLogo.src, alt: "Finnair", name: "Finnair" },
    { src: reimaLogo.src, alt: "Reima", name: "Reima" },
    { src: veikkausLogo.src, alt: "Veikkaus", name: "Veikkaus" },
    { src: samsungLogo.src, alt: "Samsung", name: "Samsung" },
    { src: keskoLogo.src, alt: "Kesko", name: "Kesko" },
    { src: baazLogo.src, alt: "Baaz", name: "Baaz" },
    { src: dubbzLogo.src, alt: "Dubbz", name: "Dubbz" },
    { src: symbalooLogo.src, alt: "Symbaloo", name: "Symbaloo" },
    { src: lahtiLogo.src, alt: "Lahti", name: "Lahti" },
    { src: sdpLogo.src, alt: "SDP", name: "SDP" }
]
---

<section id="powered-by" class="powered-band" aria-label="Powered by GameLayer">
    <div class="gl-container">
        <!-- Header -->
        <div class="powered-by-header">
            <h2 class="powered-by-title">Powered by GameLayer</h2>
            <p class="powered-by-intro">
                GameLayer powers real engagement and loyalty systems inside live digital products. The examples below show how the same core mechanics — missions, progression, rewards and rules — are applied to very different business models.
            </p>
        </div>

        <!-- Reference Tiles Grid -->
        <div class="reference-tiles-grid">
            {referenceTiles.map((tile) => (
                <div class="reference-tile">
                    <div class="reference-tile-screenshot">
                        <img 
                            src={tile.screenshot} 
                            alt={`${tile.name} - GameLayer implementation screenshot`}
                            loading="lazy"
                            decoding="async"
                        />
                    </div>
                    <div class="reference-tile-content">
                        <h3 class="reference-tile-name">{tile.name} | {tile.category}</h3>
                        <p class="reference-tile-description">{tile.description}</p>
                        {tile.learnMoreUrl && (
                            <a 
                                href={tile.learnMoreUrl} 
                                target="_blank" 
                                rel="noopener noreferrer external"
                                class="reference-tile-link"
                                aria-label={`Learn more about ${tile.name}`}
                            >
                                Learn more about {tile.name}
                            </a>
                        )}
                    </div>
                </div>
            ))}
        </div>

        <!-- Logo Wall (2x5 grid) -->
        <div class="powered-by-logo-wall">
            <div class="logo-wall-grid">
                {logoWallLogos.map((logo) => (
                    <div class="logo-wall-item">
                        <img 
                            src={logo.src} 
                            alt={`${logo.name} - GameLayer customer`}
                            loading="lazy"
                            decoding="async"
                            width="120"
                            height="60"
                        />
                    </div>
                ))}
            </div>
        </div>
    </div>
</section>

<style lang="scss">
section.powered-band {
    width: 100%;
    background: #F3F7FF;
    padding-top: clamp(16px, 2vw, 32px) !important;
    padding-bottom: clamp(16px, 2vw, 32px) !important;
    padding-inline: 0;
    margin: 0;
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.06);
    display: block;
}

.powered-by-header {
    margin: 0 auto var(--gl-space-xl);
    margin-top: 0;
    text-align: center;
    max-width: 720px;
}

/* Reset first child margin to prevent extra top gap */
#powered-by .gl-container > :first-child {
    margin-top: 0 !important;
}

.powered-by-title {
    margin: 0 auto;
    font-size: var(--gl-h2-size);
    font-weight: var(--gl-h2-weight);
    line-height: var(--gl-h2-line-height);
    letter-spacing: -0.02em;
    color: var(--as-black);
    margin-bottom: var(--gl-h2-margin-bottom);
}

.powered-by-intro {
    font-size: var(--gl-lede-size);
    font-weight: var(--gl-lede-weight);
    line-height: var(--gl-lede-line-height);
    color: var(--gl-lede-color);
    margin: var(--gl-heading-lede-gap-top) auto 0;
    margin-bottom: var(--gl-space-xl);
    max-width: var(--gl-lede-max-width);
}

/* Reference Tiles Grid */
.reference-tiles-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: clamp(24px, 3vw, 32px);
    margin-top: 50px;
    margin-bottom: var(--gl-space-xl);
}

.reference-tile {
    display: flex;
    flex-direction: column;
    border-radius: 12px;
    overflow: hidden;
    background: var(--surface);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    
    &:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    
    .reference-tile-screenshot {
        width: 100%;
        aspect-ratio: 16 / 9;
        overflow: hidden;
        background: #f5f5f5;
        
        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    }
    
    .reference-tile-content {
        padding: 24px;
        
        .reference-tile-name {
            margin: 0 0 var(--gl-h3-margin-bottom);
            font-size: var(--gl-h3-size);
            font-weight: var(--gl-h3-weight);
            line-height: var(--gl-h3-line-height);
            color: var(--as-black);
        }
        
        .reference-tile-description {
            font-size: var(--gl-body-size);
            line-height: var(--gl-body-line-height);
            font-weight: var(--gl-body-weight);
            color: var(--gl-body-color);
            margin: 0;
        }
        
        .reference-tile-link {
            display: inline-flex;
            align-items: center;
            margin-top: 16px;
            font-size: 15px;
            font-weight: 600;
            color: var(--as-accent);
            text-decoration: none;
            transition: color 0.2s ease, transform 0.2s ease;
            
            &:hover {
                color: var(--as-accent);
                text-decoration: underline;
                text-underline-offset: 3px;
            }
            
            &:focus-visible {
                outline: 2px solid var(--as-accent);
                outline-offset: 2px;
                border-radius: 4px;
            }
        }
    }
}

/* Logo Wall - 2x5 grid */
.powered-by-logo-wall {
    margin-top: clamp(22px, 2.2vw, 32px);
    padding-top: clamp(18px, 2vw, 26px);
    border-top: 1px solid rgba(0, 0, 0, 0.06);
    
    .logo-wall-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        grid-template-rows: repeat(2, 1fr);
        column-gap: clamp(24px, 3vw, 40px);
        row-gap: clamp(8px, 1vw, 16px);
        align-items: center;
        justify-items: center;
        
        .logo-wall-item {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            
            img {
                width: 100%;
                max-width: 140px;
                height: auto;
                object-fit: contain;
                filter: grayscale(100%) brightness(0.3) contrast(1.1);
                opacity: 0.6;
                transition: opacity 0.2s ease;
                
                &:hover {
                    opacity: 0.8;
                }
            }
        }
    }
}

/* Responsive */
@media (max-width: 1024px) {
    .logo-wall-grid {
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: auto;
    }
}

@media (max-width: 768px) {
    .reference-tiles-grid {
        grid-template-columns: 1fr;
        gap: 24px;
    }
    
    .logo-wall-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 24px;
    }
}

@media (max-width: 640px) {
    .logo-wall-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
    }
}
</style>