---
import { EXTERNAL_EMAILS } from '../lib/external';

const { hideHeader = false } = Astro.props;

// Filtered to show only 3 tiers: 1,000 / 50,000 / 250,000 users
const selectedPlans = [
  {
    name: "Starter",
    price: "€100",
    period: "month",
    features: [
      "Up to 1,000 active users",
      "Technical & Implementation Support: Email",
      "Concept & Programme Design Support: Ask for pricing",
      "Analytics & Reporting: Dashboard"
    ]
  },
  {
    name: "Growth",
    price: "€1,500",
    period: "month",
    features: [
      "Up to 50,000 active users",
      "Technical & Implementation Support: Slack",
      "Concept & Programme Design Support: Ask for pricing",
      "Analytics & Reporting: Weekly reports & monthly insights"
    ]
  },
  {
    name: "Scale",
    price: "€3,500",
    period: "month",
    features: [
      "Up to 250,000 active users",
      "Technical & Implementation Support: Slack",
      "Concept & Programme Design Support: Included (on request)",
      "Analytics & Reporting: Weekly reports & monthly insights"
    ]
  }
];
---

<div class="pricing-content">
    {!hideHeader && (
        <div class="pricing-header">
            <h2>Simple, transparent pricing</h2>
            <p>Choose a plan based on programme size — not features. Every plan includes full access to GameLayer's engagement mechanics.</p>
        </div>
    )}
    
    <div class="pricing-grid-wrapper">
        <div class="pricing-grid">
            {selectedPlans.map((plan) => (
                <div class="pricing-card">
                    <div class="pricing-card-header">
                        <h3 class="pricing-title">{plan.name}</h3>
                        <div class="pricing-price">
                            <span class="price">{plan.price}</span>
                            {plan.period && <span class="period">{plan.period}</span>}
                        </div>
                    </div>
                    
                    <div class="pricing-features">
                        <ul>
                            {plan.features.map((feature) => {
                                const isSupport = feature.startsWith('Technical & Implementation Support:');
                                const isConceptualSupport = feature.startsWith('Concept & Programme Design Support:');
                                const isAnalytics = feature.startsWith('Analytics & Reporting:');
                                const isActiveUsers = feature.includes('active users');
                                return (
                                    <li class={`feature-item ${isActiveUsers ? '' : 'feature-item-meta'}`}>
                                        {!isActiveUsers && <span class="bullet-point">•</span>}
                                        <span class="feature-text">
                                            {isSupport ? (
                                                <>
                                                    <strong>Technical & Implementation Support:</strong> {feature.replace('Technical & Implementation Support:', '').trim()}
                                                </>
                                            ) : isConceptualSupport ? (
                                                <>
                                                    <strong>Concept & Programme Design Support:</strong> {feature.replace('Concept & Programme Design Support:', '').trim()}
                                                </>
                                            ) : isAnalytics ? (
                                                <>
                                                    <strong>Analytics & Reporting:</strong> {feature.replace('Analytics & Reporting:', '').trim()}
                                                </>
                                            ) : isActiveUsers ? (
                                                <>
                                                    Up to <strong>{feature.replace('Up to ', '').trim()}</strong>
                                                </>
                                            ) : (
                                                feature
                                            )}
                                        </span>
                                    </li>
                                );
                            })}
                        </ul>
                    </div>
                </div>
            ))}
        </div>
    </div>

    <div class="pricing-note">
        Example programme sizes. Pricing depends on usage and requirements - contact us to plan your rollout and activation.
    </div>

    <div class="pricing-cta-wrapper">
        <a 
            href={`mailto:${EXTERNAL_EMAILS.SALES}?subject=GameLayer%20Pricing%20Enquiry`} 
            target="_self" 
            class="button button-primary pricing-cta-button"
        >
            Contact us
        </a>
    </div>

    <div class="pricing-footnote">Free plan available for testing - up to 100 users</div>
</div>


<style>
    .pricing-content {
        width: 100%;
    }

    .pricing-header {
        max-width: 720px;
        margin: 0 auto 26px;
        text-align: center;
    }

    .pricing-header h2 {
        font-size: var(--gl-h2-size);
        font-weight: var(--gl-h2-weight);
        line-height: var(--gl-h2-line-height);
        letter-spacing: -0.02em;
        margin: 0 auto var(--gl-h2-margin-bottom);
        color: var(--as-black);
        text-align: center;
    }

    .pricing-header p {
        font-size: var(--gl-lede-size);
        font-weight: var(--gl-lede-weight);
        line-height: var(--gl-lede-line-height);
        color: var(--gl-lede-color);
        margin: var(--gl-heading-lede-gap-top) auto 0;
        max-width: var(--gl-lede-max-width);
        text-align: center;
    }

    /* Pricing Grid Wrapper */
    .pricing-grid-wrapper {
        width: 100%;
        margin-bottom: 32px;
    }

    .pricing-note {
        margin: 0 auto 24px;
        text-align: center;
        font-size: 15px;
        color: rgba(15, 23, 42, 0.65);
        max-width: 720px;
    }

    .pricing-footnote {
        margin: 24px auto 0;
        text-align: center;
        font-size: 15px;
        font-style: italic;
        color: rgba(15, 23, 42, 0.65);
    }

    .pricing-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 18px;
        align-items: stretch;
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        box-sizing: border-box;
    }

    .pricing-card {
        background: #fff;
        border: 1px solid rgba(15, 23, 42, 0.10);
        border-radius: 22px;
        box-shadow: 0 10px 30px rgba(15, 23, 42, 0.06);
        padding: 32px;
        display: flex;
        flex-direction: column;
        height: 100%;
        transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease;
        box-sizing: border-box;
        width: 100%;
        max-width: 100%;
    }

    .pricing-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 14px 40px rgba(15, 23, 42, 0.08);
        border-color: rgba(15, 23, 42, 0.12);
    }

    .pricing-card-header {
        text-align: center;
        margin-bottom: var(--gl-card-content-gap);
    }

    .pricing-title {
        margin: 0 0 var(--gl-h3-margin-bottom);
        font-size: var(--gl-h3-size);
        font-weight: var(--gl-h3-weight);
        line-height: var(--gl-h3-line-height);
        line-height: 1.1;
        color: var(--color-text);
    }

    .pricing-price {
        margin: 0;
        text-align: center;
        display: flex;
        align-items: baseline;
        justify-content: center;
        gap: 6px;
    }

    .price {
        font-size: 48px;
        font-weight: 900;
        letter-spacing: -0.02em;
        color: var(--color-text);
        line-height: 1;
    }

    .period {
        font-size: 13px;
        opacity: 0.7;
        color: var(--color-text);
    }

    .pricing-limit {
        margin: 0 0 18px;
        font-size: 14px;
        opacity: 0.8;
        color: rgba(15, 23, 42, 0.85);
        text-align: center;
    }

    .users {
        color: var(--color-text-muted);
        font-size: 14px;
        opacity: 0.75;
        margin: 0 0 18px;
    }

    .pricing-features {
        flex-grow: 1;
        margin: 0;
        margin-top: 24px;
    }

    .pricing-features ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: grid;
        gap: var(--gl-list-item-gap);
        color: rgba(15, 23, 42, 0.86);
    }

    .feature-item {
        display: flex;
        align-items: flex-start;
        gap: var(--gl-card-content-gap);
        line-height: var(--gl-body-line-height);
        color: var(--gl-body-color);
        font-size: 16px;
        font-weight: var(--gl-body-weight);
    }

    .feature-item-meta {
        font-size: 13px;
        font-style: italic;
        color: #9ca3af;
    }

    .feature-text {
        flex: 1;
    }

    .bullet-point {
        margin-top: 2px;
        flex-shrink: 0;
        color: rgba(15, 23, 42, 0.86);
        font-size: 16px;
        line-height: 1;
    }

    .feature-item-meta .bullet-point {
        font-size: 13px;
        color: #9ca3af;
    }

    .pricing-cta-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
        margin-top: 0;
    }

    .pricing-cta-button {
        width: auto;
        min-width: 160px;
    }


    @media (max-width: 1024px) {
        .pricing-grid {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
    }

    @media (max-width: 640px) {
        .pricing-grid {
            grid-template-columns: 1fr;
            gap: 16px;
        }

        .pricing-card {
            padding: 22px;
            min-width: 0;
        }

        .pricing-title {
            font-size: 26px;
        }

        .price {
            font-size: 44px;
        }
    }

    @media (max-width: 480px) {
        .pricing-section {
            padding: 60px 0;
        }
        
        .value-framing {
            font-size: 1.4rem;
            margin-top: 1rem;
            padding: 0 1rem;
        }
    }

</style>




