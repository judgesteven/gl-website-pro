---
import { EXTERNAL_EMAILS } from '../lib/external';
import { pricingPlans } from '../lib/pricingPlans';

const { hideHeader = false } = Astro.props;

// Payment logos
const StripeLogo = '/Stripe_Logo.svg';
const GoCardlessLogo = '/GoCardless_Logo.svg';
---

<div class="pricing-content">
    {!hideHeader && (
        <div class="pricing-header">
            <h2>Simple, transparent pricing</h2>
            <p>Choose a plan based on scale - not features. Every plan includes full and unlimited access to GameLayer's engagement mechanics â€” pricing simply reflects usage as your product grows.</p>
        </div>
    )}
    
    <div class="pricing-grid">
        {pricingPlans.map((plan) => (
            <div class="pricing-card">
                <div class="pricing-card-header">
                    <h3 class="pricing-title">{plan.name}</h3>
                    <div class="pricing-price">
                        <span class="price">{plan.price}</span>
                        {plan.period && <span class="period">{plan.period}</span>}
                    </div>
                </div>
                
                <div class="pricing-features">
                    <ul>
                        {plan.features.map((feature) => (
                            <li class="feature-item">
                                <svg class="check-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16">
                                    <path fill-rule="evenodd" d="M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z" clip-rule="evenodd" />
                                </svg>
                                {feature}
                            </li>
                        ))}
                    </ul>
                </div>
                
                <div class="pricing-cta">
                    <a 
                        href={`mailto:${EXTERNAL_EMAILS.SALES}?subject=GameLayer%3A%20${plan.name}%20Plan%20Enquiry`} 
                        target="_self" 
                        class="button button-primary"
                    >
                        Contact Us
                    </a>
                </div>
            </div>
        ))}
    </div>

    <div class="pricing-footnote">Free plan available for testing and prototyping - up to 100 users</div>

    <div class="pricing-payments" aria-label="Payments">
        <div class="pricing-payments__content">
            <p class="pricing-payments__text">
                Card payments via <img src={StripeLogo} alt="Stripe" class="pay-brand-logo" loading="lazy" decoding="async" /> and bank payments via <img src={GoCardlessLogo} alt="GoCardless" class="pay-brand-logo" loading="lazy" decoding="async" /><br />
                Contact us and we'll send a secure payment link to activate your plan
            </p>
        </div>
    </div>
</div>


<style>
    .pricing-content {
        width: 100%;
    }

    .pricing-header {
        max-width: 720px;
        margin: 0 auto 26px;
        text-align: center;
    }

    .pricing-header h2 {
        font-size: var(--gl-h2-size);
        font-weight: var(--gl-h2-weight);
        line-height: var(--gl-h2-line-height);
        letter-spacing: -0.02em;
        margin: 0 auto var(--gl-h2-margin-bottom);
        color: var(--as-black);
        text-align: center;
    }

    .pricing-header p {
        font-size: var(--gl-lede-size);
        font-weight: var(--gl-lede-weight);
        line-height: var(--gl-lede-line-height);
        color: var(--gl-lede-color);
        margin: var(--gl-heading-lede-gap-top) auto 0;
        max-width: var(--gl-lede-max-width);
        text-align: center;
    }

    .pricing-grid {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 18px;
        align-items: stretch;
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        box-sizing: border-box;
    }

    .pricing-footnote {
        margin-top: 32px;
        text-align: center;
        font-size: 15px;
        font-style: italic;
        opacity: 0.65;
    }

    .pricing-card {
        background: #fff;
        border: 1px solid rgba(15, 23, 42, 0.10);
        border-radius: 22px;
        box-shadow: 0 10px 30px rgba(15, 23, 42, 0.06);
        padding: 32px;
        display: flex;
        flex-direction: column;
        height: 100%;
        transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease;
        box-sizing: border-box;
        width: 100%;
        max-width: 100%;
    }

    .pricing-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 14px 40px rgba(15, 23, 42, 0.08);
        border-color: rgba(15, 23, 42, 0.12);
    }

    .pricing-card-header {
        text-align: center;
        margin-bottom: var(--gl-card-content-gap);
    }

    .pricing-title {
        margin: 0 0 var(--gl-h3-margin-bottom);
        font-size: var(--gl-h3-size);
        font-weight: var(--gl-h3-weight);
        line-height: var(--gl-h3-line-height);
        line-height: 1.1;
        color: var(--color-text);
    }

    .pricing-price {
        margin: 0;
        text-align: center;
        display: flex;
        align-items: baseline;
        justify-content: center;
        gap: 6px;
    }

    .price {
        font-size: 48px;
        font-weight: 900;
        letter-spacing: -0.02em;
        color: var(--color-text);
        line-height: 1;
    }

    /* Reduce font size for "Ask Us" text in Enterprise card (last card) */
    .pricing-card:last-child .price {
        font-size: 36px;
    }

    .period {
        font-size: 13px;
        opacity: 0.7;
        color: var(--color-text);
    }

    .pricing-limit {
        margin: 0 0 18px;
        font-size: 14px;
        opacity: 0.8;
        color: rgba(15, 23, 42, 0.85);
        text-align: center;
    }

    .users {
        color: var(--color-text-muted);
        font-size: 14px;
        opacity: 0.75;
        margin: 0 0 18px;
    }

    .pricing-features {
        flex-grow: 1;
        margin: 0;
        margin-top: 24px;
    }

    .pricing-features ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: grid;
        gap: var(--gl-list-item-gap);
        color: rgba(15, 23, 42, 0.86);
    }

    .feature-item {
        display: flex;
        align-items: flex-start;
        gap: var(--gl-card-content-gap);
        line-height: var(--gl-body-line-height);
        color: var(--gl-body-color);
        font-size: var(--gl-body-size);
        font-weight: var(--gl-body-weight);
    }

    .check-icon {
        margin-top: 2px;
        opacity: 0.7;
        flex-shrink: 0;
        color: rgba(15, 23, 42, 0.86);
    }

    .pricing-cta {
        margin-top: auto;
        padding-top: 20px;
    }

    .pricing-cta {
        margin-top: auto;
        padding-top: 20px;
        display: flex;
        justify-content: center;
    }

    .pricing-cta .button {
        width: auto;
        min-width: 140px;
    }

    /* Secondary button - Bank Account */
    .button-bank {
        background: rgba(0, 0, 0, 0.03);
        color: var(--color-text);
        border: none;
        box-shadow: none;
    }

    .button-bank:hover {
        background: rgba(0, 0, 0, 0.07);
        color: var(--color-text);
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .button-bank:active {
        transform: translateY(0);
        background: rgba(0, 0, 0, 0.05);
    }

    .pricing-cta .button svg {
        flex-shrink: 0;
        opacity: 0.9;
    }

    .pricing-cta .button:hover svg {
        opacity: 1;
    }

    @media (max-width: 1024px) {
        .pricing-grid {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
    }

    @media (max-width: 640px) {
        .pricing-grid {
            grid-template-columns: 1fr;
            gap: 16px;
        }

        .pricing-card {
            padding: 22px;
            min-width: 0;
        }

        .pricing-title {
            font-size: 26px;
        }

        .price {
            font-size: 44px;
        }
    }

    @media (max-width: 480px) {
        .pricing-section {
            padding: 60px 0;
        }
        
        .value-framing {
            font-size: 1.4rem;
            margin-top: 1rem;
            padding: 0 1rem;
        }
    }

    /* Payments Trust Row */
    .pricing-payments {
        margin-top: 18px;
        width: 100%;
        max-width: 1200px;
        margin-left: auto;
        margin-right: auto;
        display: flex;
        justify-content: center;
    }

    .pricing-payments__content {
        background: rgba(15, 23, 42, 0.03);
        border: 1px solid rgba(15, 23, 42, 0.06);
        border-radius: 16px;
        padding: 14px 16px;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .pricing-payments__text {
        margin: 0;
        font-size: 14px;
        line-height: 1.5;
        opacity: 0.85;
        color: rgba(15, 23, 42, 0.85);
        text-align: center;
    }

    .pay-brand-logo {
        height: 18px;
        vertical-align: middle;
        margin: 0 4px;
        display: inline-block;
        object-fit: contain;
    }

    @media (max-width: 640px) {
        .pricing-card {
            padding: 22px;
        }

        .pricing-payments__content {
            flex-direction: column;
            align-items: flex-start;
            gap: 12px;
        }
    }
</style>



